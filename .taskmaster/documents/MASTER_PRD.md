# NP Signal Trading Platform - Master PRD

## 프로젝트 개요
AI 기반 거래 신호 분석 및 포트폴리오 관리 시스템

**프로젝트 타입**: 마이크로서비스 아키텍처  
**주요 포커스**: 코어 거래 시스템  
**생성일**: 2025-08-16  
**마지막 업데이트**: 2025-08-16  

---

## 시스템 아키텍처

### 1. ✅ 마이크로서비스 분리 완료
**상태**: 완료  
**설명**: Signal Processor를 독립 마이크로서비스로 분리하고 메인 프로젝트 정리

**세부 사항**:
- Signal Processor를 별도 저장소(github.com/ibnetsoft/geminisignal)로 분리
- Cloud Run 독립 배포
- 메인 프로젝트에서 관련 파일 제거 및 정리

**테스트 전략**:
- Signal Processor 독립 배포 확인
- 텔레그램 알림 테스트
- Firestore 연결 테스트

---

### 2. ⚠️ 메인 프로젝트 기능 개선
**상태**: 대기 중 (마이크로서비스 분리 완료 후)  
**우선순위**: 높음  
**설명**: 코어 거래 시스템, 웹 인터페이스, 포트폴리오 관리 기능 강화

**세부 사항**:
- 기존 거래 시스템 최적화
- 웹 인터페이스 개선
- 포트폴리오 성과 분석 고도화
- 리스크 관리 시스템 강화

**테스트 전략**:
- 각 기능별 단위 테스트
- 통합 테스트
- 사용자 시나리오 테스트

---

### 3. ⚠️ AI 서비스 최적화
**상태**: 대기 중 (메인 프로젝트 개선 후)  
**우선순위**: 중간  
**설명**: 다중 AI 모델 통합 및 성능 최적화

**세부 사항**:
- Gemini, GPT, Claude 등 다중 AI 모델 오케스트레이션 개선
- 응답 속도 최적화
- 비용 효율성 개선

**테스트 전략**:
- AI 응답 품질 테스트
- 성능 벤치마크
- 비용 분석

---

### 4. ⚠️ 모니터링 및 분석 대시보드
**상태**: 대기 중 (메인 프로젝트 개선 후)  
**우선순위**: 중간  
**설명**: 실시간 모니터링 및 성과 분석 대시보드 구축

**세부 사항**:
- 거래 성과, 포트폴리오 상태, 시스템 헬스 모니터링
- 실시간 차트, 알림 시스템, 리포트 생성 기능

**테스트 전략**:
- 실시간 데이터 업데이트 테스트
- 차트 렌더링 성능 테스트
- 알림 시스템 테스트

---

### 5. ⚠️ 보안 및 인증 시스템 강화
**상태**: 대기 중 (메인 프로젝트 개선 후)  
**우선순위**: 높음  
**설명**: 사용자 인증, 권한 관리, API 보안 강화

**세부 사항**:
- OAuth 2.0 인증
- 역할 기반 접근 제어
- API 키 관리
- 감사 로그 시스템 구현

**테스트 전략**:
- 보안 취약점 스캔
- 인증 플로우 테스트
- 권한 검증 테스트

---

## 기술 스택

### 백엔드
- **런타임**: Node.js 18
- **프레임워크**: Express.js
- **데이터베이스**: Firebase Firestore
- **인증**: Firebase Auth
- **배포**: Firebase Functions

### AI 및 분석
- **주요 AI**: Claude 3.5 Sonnet
- **연구 AI**: Perplexity Llama 3.1 Sonar
- **백업 AI**: GPT-4o Mini
- **신호 분석**: Google Gemini

### 외부 서비스
- **거래 API**: MetaAPI
- **알림**: Telegram Bot
- **뉴스 데이터**: Alpha Vantage, Finnhub, MarketAux

---

## 프로젝트 설정

### AI 모델 설정
- **기본 복잡도**: 중간
- **자동 확장**: 활성화
- **연구 모드**: 활성화
- **최대 서브태스크**: 5개

### 개발 환경
- **로컬 개발**: `npm run dev`
- **프로덕션 빌드**: `npm run build`
- **테스트**: `npm test`
- **배포**: `firebase deploy`

---

## 현재 우선순위

1. **✅ 마이크로서비스 분리** - 완료
2. **🔄 메인 프로젝트 기능 개선** - 진행 중
3. **⏳ 보안 시스템 강화** - 대기
4. **⏳ AI 서비스 최적화** - 대기
5. **⏳ 모니터링 대시보드** - 대기

---

## MetaAPI 거래 계정 정보

### 테스트 계정 (XM Global)
- **계정 번호**: 308592422
- **패스워드**: @G2uzK6@9sMZznx
- **서버**: XMGlobal-MT5 6
- **플랫폼**: MetaTrader 5
- **브로커**: XM Global

### 테스트 시나리오
1. **연결 테스트**: 계정 정보 확인 및 연결 상태 검증
2. **포지션 조회**: 현재 BTCUSD 포지션 확인
3. **청산 테스트**: 기존 BTCUSD 0.1lot 포지션 청산
4. **진입 테스트**: 새로운 BTCUSD 0.1lot 포지션 진입
5. **상태 확인**: 거래 실행 결과 및 계정 상태 검증

---

## ChatGPT 유저 응대 시스템

### 시스템 개요
**목적**: 고객 서비스 전용 ChatGPT와 거래용 ChatGPT를 분리하여 각각 다른 역할 수행

### 아키텍처
1. **거래용 ChatGPT**: MetaAPI 연동, 실제 거래 실행
2. **고객 응대용 ChatGPT**: 유저 상담, 경고 메시지, 고객 서비스

### 어드민 페이지 API 키 관리 시스템
**우선순위**: 높음 (중요 기능)

#### API 키 관리 필드
1. **거래용 API 키**
   - 필드명: `TRADING_CHATGPT_API_KEY`
   - 용도: MetaAPI 거래 실행 전용
   - 권한: 거래 시스템 접근, MetaAPI 호출

2. **고객 응대용 API 키**
   - 필드명: `CUSTOMER_SERVICE_API_KEY`
   - 용도: 유저 상담, 응대, 경고 메시지 전용
   - 권한: 고객 데이터 접근, 응대 가이드라인 적용

#### 어드민 학습 관리 기능
1. **응대 스타일 설정**
   - 친근한/전문적인/공식적인 톤 선택
   - 맞춤형 인사말 및 마무리 멘트
   - 브랜드 보이스 가이드라인

2. **경고 메시지 템플릿**
   - 리스크 경고 수준별 메시지
   - 거래 한도 초과 알림
   - 시장 변동성 경고
   - 계정 보안 알림

3. **FAQ 및 응답 가이드**
   - 자주 묻는 질문 데이터베이스
   - 상황별 응답 시나리오
   - 에스컬레이션 규칙

4. **유저 세그먼트별 응대**
   - 신규 유저: 튜토리얼 중심
   - 경험자: 고급 기능 안내
   - VIP 고객: 프리미엄 서비스

#### 구현 계획
1. **Phase 1**: 어드민 페이지 API 키 입력 필드 구현
2. **Phase 2**: 고객 응대 ChatGPT 시스템 구축
3. **Phase 3**: 학습 인터페이스 및 템플릿 관리
4. **Phase 4**: 실시간 응대 모니터링 및 개선

#### 기술 사양
- **프론트엔드**: React 어드민 대시보드
- **백엔드**: Express.js API 서버
- **데이터베이스**: Firestore (학습 데이터, 템플릿, 설정)
- **보안**: API 키 암호화 저장, 역할 기반 접근 제어

---

## 연락처 및 리소스

- **Task Master AI**: `.taskmaster/` 디렉토리
- **설정 파일**: `.taskmaster/config.json`
- **작업 관리**: `.taskmaster/tasks/tasks.json`
- **명령어**: `npm run task:status`, `npm run task:add`